package worms.model;

import worms.model.programs.ProgramFactory.ForeachType;

public class StatementForEach extends Statement {
	
	private final ForeachType type;
	private final String variable;
	
	public StatementForEach(ForeachType type, String variable, Statement s) {
		super(new Statement[] {s}, new Expression[0]);
		this.type = type;
		this.variable = variable;
	}

	@Override
	public void execute() {
		if ( type == ForeachType.WORM ) {
			for ( Worm worm : getProgram().getWorm().getWorld().getWorms() ) {
				Statement s = new StatementAssignment(variable, new ExpressionSingular(Expression.Types.SELF, new Type<Entity>(new Entity(worm))));
				s.execute();
			}
		}
		// TODO Auto-generated method stub

	}

	@Override
	public boolean containsActionStatement() {
		return getStatements().get(0).containsActionStatement();
	}

}
